using System;

class Program
{
    public enum Choice
    {
        Rock = 1,
        Paper = 2,
        Scissors = 3
    }

    public static void Main(string[] args)
    {
        Console.WriteLine("=== –ò–≥—Ä–∞ –ö–∞–º–µ–Ω—å - –ù–æ–∂–Ω–∏—Ü—ã - –ë—É–º–∞–≥–∞ ===\n");

        bool playAgain = true;
        int playerWins = 0;
        int computerWins = 0;
        int draws = 0;

        while (playAgain)
        {
            Console.WriteLine("–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à —Ö–æ–¥:");
            Console.WriteLine("1 - –ö–∞–º–µ–Ω—å");
            Console.WriteLine("2 - –ë—É–º–∞–≥–∞");
            Console.WriteLine("3 - –ù–æ–∂–Ω–∏—Ü—ã");
            Console.Write("–í–∞—à –≤—ã–±–æ—Ä (1-3): ");

            if (int.TryParse(Console.ReadLine(), out int playerChoice) &&
                playerChoice >= 1 && playerChoice <= 3)
            {
                Choice playerMove = (Choice)playerChoice;
                Choice computerMove = GetComputerChoice();

                Console.WriteLine($"\n–í—ã –≤—ã–±—Ä–∞–ª–∏: {GetChoiceName(playerMove)}");
                Console.WriteLine($"–ö–æ–º–ø—å—é—Ç–µ—Ä –≤—ã–±—Ä–∞–ª: {GetChoiceName(computerMove)}");

                GameResult result = DetermineWinner(playerMove, computerMove);

                switch (result)
                {
                    case GameResult.PlayerWins:
                        Console.WriteLine("üéâ –í—ã –≤—ã–∏–≥—Ä–∞–ª–∏!");
                        playerWins++;
                        break;
                    case GameResult.ComputerWins:
                        Console.WriteLine("üòû –ö–æ–º–ø—å—é—Ç–µ—Ä –≤—ã–∏–≥—Ä–∞–ª!");
                        computerWins++;
                        break;
                    case GameResult.Draw:
                        Console.WriteLine("ü§ù –ù–∏—á—å—è!");
                        draws++;
                        break;
                }

                Console.WriteLine($"\n–°—á–µ—Ç: –í—ã {playerWins} - {computerWins} –ö–æ–º–ø—å—é—Ç–µ—Ä (–ù–∏—á—å–∏—Ö: {draws})");

                Console.Write("\n–•–æ—Ç–∏—Ç–µ —Å—ã–≥—Ä–∞—Ç—å –µ—â–µ —Ä–∞–∑? (y/n): ");
                string response = Console.ReadLine()?.ToLower();
                playAgain = response == "y" || response == "yes" || response == "–¥–∞" || response == "–¥";
                Console.WriteLine();
            }
            else
            {
                Console.WriteLine("–ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä! –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ –æ—Ç 1 –¥–æ 3.\n");
            }
        }

        Console.WriteLine("–°–ø–∞—Å–∏–±–æ –∑–∞ –∏–≥—Ä—É!");
        Console.WriteLine($"–§–∏–Ω–∞–ª—å–Ω—ã–π —Å—á–µ—Ç: –í—ã {playerWins} - {computerWins} –ö–æ–º–ø—å—é—Ç–µ—Ä (–ù–∏—á—å–∏—Ö: {draws})");

        if (playerWins > computerWins)
            Console.WriteLine("üèÜ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ –æ–±—â–∏–π –∑–∞—á–µ—Ç!");
        else if (computerWins > playerWins)
            Console.WriteLine("ü§ñ –ö–æ–º–ø—å—é—Ç–µ—Ä –≤—ã–∏–≥—Ä–∞–ª –æ–±—â–∏–π –∑–∞—á–µ—Ç!");
        else
            Console.WriteLine("‚öñÔ∏è –û–±—â–∏–π –∑–∞—á–µ—Ç –∑–∞–∫–æ–Ω—á–∏–ª—Å—è –≤–Ω–∏—á—å—é!");
    }

    public enum GameResult
    {
        PlayerWins,
        ComputerWins,
        Draw
    }

    public static Choice GetComputerChoice()
    {
        Random random = new Random();
        return (Choice)random.Next(1, 4);
    }

    public static string GetChoiceName(Choice choice)
    {
        switch (choice)
        {
            case Choice.Rock:
                return "–ö–∞–º–µ–Ω—å üóø";
            case Choice.Paper:
                return "–ë—É–º–∞–≥–∞ üìÑ";
            case Choice.Scissors:
                return "–ù–æ–∂–Ω–∏—Ü—ã ‚úÇÔ∏è";
            default:
                return "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ";
        }
    }

    public static GameResult DetermineWinner(Choice player, Choice computer)
    {
        if (player == computer)
        {
            return GameResult.Draw;
        }

        bool playerWins = (player == Choice.Rock && computer == Choice.Scissors) ||
                         (player == Choice.Paper && computer == Choice.Rock) ||
                         (player == Choice.Scissors && computer == Choice.Paper);

        return playerWins ? GameResult.PlayerWins : GameResult.ComputerWins;
    }
}
